"use strict";(self.webpackChunkatelier=self.webpackChunkatelier||[]).push([[422],{6422:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Z});var n=r(5671),a=r(3144),c=r(7326),l=r(136),o=r(6215),i=r(1120),u=r(7294),s=r(9583),d=r(3750),m=r(8491);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const p=function(e){var t=Object.keys(e),r=0,n=0;if(t.length>0){var a,c=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,c=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw c}}}}(t);try{for(c.s();!(a=c.n()).done;){var l=a.value;r+=Number(l)*Number(e[l]),n+=Number(e[l])}}catch(e){c.e(e)}finally{c.f()}return r/n}return-1};var h=r(1463),v=r(6784);const g=function(e){var t=e.value;return u.createElement(v.Z,{spacing:1},u.createElement(h.Z,{name:"read-only",size:"small",value:t,precision:.1,readOnly:!0}))},y=function(e){var t=e.defaultItem;return u.createElement("div",null,null===t.sale_price&&u.createElement("p",{className:"originalPrice"},t.original_price),null!==t.sale_price&&u.createElement("p",{className:"crossOutOriginalPrice"},t.original_price),null!==t.sale_price&&u.createElement("p",{className:"salePrice"},t.sale_price))};var E=r(779),I=r(1945),b=r(5147),w=r(5155);const k=function(e){var t=e.current,r=e.description,n=e.compared;return u.createElement("tr",null,u.createElement("td",null,t||""),u.createElement("td",{className:"description"},r),u.createElement("td",null,n||""))},C=function(e){var t=e.show,r=e.comparedProductInfo,n=e.currentProductInfo,a=e.changeShow,c=n.features,l=r.features,o=[],i=new Set;return function(){for(var e=0;e<c.length;e++){o[e]=[],o[e][0]=c[e].feature,o[e][1]=c[e].value,i.add(c[e].feature);for(var t=0;t<l.length;t++)l[t].feature===c[e].feature?o[e][2]=l[t].value:o[e][2]=""}for(var r=0;r<l.length;r++)i.has(l[r].feature)||(o[o.length]=[l[r].feature,"",l[r].value])}(),u.createElement("div",null,u.createElement(E.Z,{title:"modal",show:t,onHide:a,size:"lg"},u.createElement(E.Z.Header,{closeButton:!0},u.createElement(E.Z.Title,null,"Comparing")),u.createElement(E.Z.Body,null,u.createElement(b.Z,{role:"table"},u.createElement("thead",null,u.createElement("tr",null,u.createElement("th",{title:"currentTitle",className:"currentTitle"},n.name),u.createElement("th",null," "),u.createElement("th",{title:"comparedTitle"},r.name))),u.createElement("tbody",null,u.createElement(k,{current:n.slogan,description:"slogan",compared:r.slogan}),u.createElement(k,{current:n.description,description:"description",compared:r.description}),u.createElement(k,{current:n.default_price,description:"default price",compared:r.default_price}),u.createElement(k,{current:n.category,description:"category",compared:r.category}),o.length>0&&o.map((function(e,t){return u.createElement(k,{key:t,current:!0===e[1]&&u.createElement(w.pZQ,null)||e[1],description:e[0],compared:!0===e[2]&&u.createElement(w.pZQ,null)||e[2]})}))))),u.createElement(E.Z.Footer,null,u.createElement(I.Z,{title:"button",variant:"secondary",onClick:function(){return a()}},"Close"))))};var P=r(9755),S=r.n(P);const Z=function(e){(0,l.Z)(h,e);var t,r,f=(t=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,i.Z)(t);if(r){var a=(0,i.Z)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return(0,o.Z)(this,e)});function h(e){var t;return(0,n.Z)(this,h),(t=f.call(this,e)).state={comparedProducInfo:null,defaultItem:null,reviewRating:0,show:!1},t.starClicked=!1,t.changeShow=t.changeShow.bind((0,c.Z)(t)),t.cardClicked=t.cardClicked.bind((0,c.Z)(t)),t}return(0,a.Z)(h,[{key:"componentDidMount",value:function(){var e=this;this.update(),(0,m.Jh)(this.props.id,(function(t){e.setState({reviewRating:p(t.ratings)})}))}},{key:"getDefaultItem",value:function(e){var t=e.filter((function(e){return e["default?"]}));t=0===t.length?e[0]:t[0],this.setState({defaultItem:t})}},{key:"update",value:function(){var e=this;(0,m.yO)(this.props.id,(function(t){e.setState({comparedProducInfo:t})})),(0,m.Ll)(this.props.id,(function(t){e.getDefaultItem(t.results)}))}},{key:"changeShow",value:function(){this.setState({show:!1})}},{key:"cardClicked",value:function(e){!1===this.starClicked?(this.props.changeCurrentProductId(this.state.comparedProducInfo.id),function(e,t){var r=new Date,n="".concat(r.getTime()),a=e.target.getAttribute("element");S().ajax({type:"POST",url:"/related/interactions",data:JSON.stringify({element:a,widget:t,time:n}),contentType:"application/json",success:function(){return console.log("success")},err:function(e){return console.log(e)}})}(e,"related")):this.starClicked=!1}},{key:"render",value:function(){var e=this;return u.createElement("div",null,u.createElement("div",{className:"card",role:"button",tabIndex:"0",onClick:function(t){return e.cardClicked(t)}},null!==this.state.defaultItem&&u.createElement("div",{className:"image-holder"},u.createElement("img",{src:this.state.defaultItem.photos[0].thumbnail_url,element:"changeCardClicked",className:"card-image",alt:this.state.defaultItem.name})),u.createElement("div",{className:"card-body"},null!==this.state.comparedProducInfo&&u.createElement("h6",{className:"card-subtitle mb-2 text-muted"},this.state.comparedProducInfo.category),null!==this.state.comparedProducInfo&&u.createElement("h5",{className:"card-title"},this.state.comparedProducInfo.name),null!==this.state.defaultItem&&u.createElement(y,{defaultItem:this.state.defaultItem}),-1!==this.state.reviewRating&&u.createElement(g,{value:this.state.reviewRating})),this.state.show&&u.createElement(C,{show:this.state.show,comparedProductInfo:this.state.comparedProducInfo,currentProductInfo:this.props.currentProductInfo,changeShow:this.changeShow})),"related"===this.props.type&&u.createElement(s.jJN,{title:"star",className:"iconTop",onClick:function(){e.starClicked=!0,e.setState({show:!0})}}),"outfit"===this.props.type&&u.createElement(d.C7Q,{className:"iconTop",element:"comparison",onClick:function(){e.props.deleteOutfit(e.props.id)}}))}}]),h}(u.Component)}}]);